#对象的共享
##可见性
- 在没有同步的情况下，编译器、处理器以及运行时等都可能对操作的执行顺序进行一些意想不到的调整。在缺乏足够同步的多线程程序中，要想对内存操作的执行顺序进行判断，几乎无法得出正确结论。
- 加锁的含义不仅仅局限于互斥行为，还包括内存可见性。为了确保所有线程都能看到共享变量的最新值，所有执行读操作和写操作的线程都必须在同一个锁上同步。
- volatile变量
- 仅当volatile变量能简化代码的实现以及对同步策略的验证时，才应该使用，如果在验证正确性时需要对可见性进行复杂的判断，那么就不要使用volatile
- 加锁机制既可以保证可见性又可以确保原子性，而volatile变量只能确保可见性
##发布和逸出
- 发布一个对象的意思是指，是对象能够在当前作用域之外的代码中使用，当某个不应该发布的对象被发布时，这种情况称为逸出
- 不要在构造过程中使用this逸出，也就是不要在对象构造函数没有执行完的情况下（也就是对象还没初始化完成的情况下）将该对象（this）有暴漏出去的可能。
##线程封闭
###Ad-hoc线程封闭
- Ad-hoc线程封闭是指维护线程封闭性的职责完全由程序实现来承担（太过脆弱）
###栈封闭
###ThreadLocal类
- ThreadLocal是将线程中的某个值与保存值的对象关联起来，实现了线程封闭。
##不变性
- 不可变对象一定是线程安全的
- 满足以下条件，对象才是不可变：1.对象创建以后其状态就不能修改；2.对象的所有域都是final类型；3.对象是正确创建的（在对象的创建期间，this引用没有逸出）
